"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[126],{8126:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(3433),i=n(9439),s=n(2791),l=n(7689),r=n(1087),o=(n(8228),n(4165)),c=n(5861),d=n(4942),u=n(1413),h=n(4290),p=n(4702),m=n(1353),f=(0,p.ZF)({apiKey:"AIzaSyAvHiCbuI2bpFsZm6aVedHGcrZhrqW-V0k",authDomain:"premium-model-frontend.firebaseapp.com",projectId:"premium-model-frontend",storageBucket:"premium-model-frontend.appspot.com",messagingSenderId:"62996785354",appId:"1:62996785354:web:be12debb9741d4fe2aec33"}),v=(0,m.cF)(f),g=n(9434),x=n(4338),b=n(9687),j=(n(8838),n(6890),n(3342),n(6202),n(1207),n(2687),n(1786),n(8291),n(395),n(4601),n(6733),n(1108),n(6504),n(8924),n(769),n(288),n(2655),n(1182),n(6168),n(5672),n(594),n(7711),n(4954),n(7935),n(1639),n(3660),n(7332),n(317),n(5637),n(1228),n(5278),n(560),n(1559),n(499),n(8743),n(58),n(782),n(184));function k(e){var t=e.setParagraphs,n=(e.paragraphs,(0,s.useRef)(null)),a=(0,s.useState)(0),l=(0,i.Z)(a,2),r=(l[0],l[1]);return(0,j.jsx)("div",{children:(0,j.jsx)(b.M,{onInit:function(e,t){return n.current=t},init:{height:500,menubar:!1,selector:"textarea",plugins:["advlist","anchor","autolink","help","image","link","lists","searchreplace","table","wordcount","media"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | image | link",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",file_picker_types:"image",file_picker_callback:function(e,t,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var t=this.files[0],n=(new Date).getTime()+t.name,a=(0,h.iH)(v,"/blogs/".concat(n)),i=(0,h.B0)(a,t);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(r(Math.round(t)),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){}),(function(){(0,h.Jt)(i.snapshot.ref).then((function(t){e(t,{image:t})}))}))},a.click()}},onEditorChange:function(e,n){var a=e.split("\n").map((function(e){var t;return e.trim().startsWith("<p><img")?{text:"",image:(null===(t=e.match(/src="([^"]+)"/))||void 0===t?void 0:t[1])||""}:{text:e.trim(),image:""}}));t(a)}})})}var y=n(3185),w=n(8914),N=function(){var e=(0,g.v9)((function(e){return e.process})),t=e.isFetching,n=(0,l.TH)().state,a=(0,g.I0)(),r=(0,s.useState)((null===n||void 0===n?void 0:n.title)||""),p=(0,i.Z)(r,2),m=p[0],f=p[1],x=(0,s.useState)((null===n||void 0===n?void 0:n.photo)||void 0),b=(0,i.Z)(x,2),N=b[0],Z=b[1],C=(0,s.useState)((null===n||void 0===n?void 0:n.cat)||""),S=(0,i.Z)(C,2),F=S[0],_=S[1],I=(0,s.useState)(0),U=(0,i.Z)(I,2),B=(U[0],U[1]),T=(0,s.useState)({}),P=(0,i.Z)(T,2),z=P[0],D=P[1],H=(0,s.useState)(""),M=(0,i.Z)(H,2),A=(M[0],M[1],(0,s.useState)([])),W=(0,i.Z)(A,2),E=W[0],G=W[1];(0,s.useEffect)((function(){N&&function(e,t){var n=(new Date).getTime()+e.name,a=(0,h.iH)(v,"/models/".concat(n)),i=(0,h.B0)(a,e);i.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;switch("photo"===t&&B(Math.round(n)),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){}),(function(){(0,h.Jt)(i.snapshot.ref).then((function(e){D((function(n){return(0,u.Z)((0,u.Z)({},n),{},(0,d.Z)({},t,e))}))}))}))}(N,"photo")}),[N]);var R={title:m,photo:(null===n||void 0===n?void 0:n.photo)||z.photo,cat:F,paragraphs:E},L=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var i,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a((0,y.GA)()),e.prev=2,!n){e.next=13;break}return e.next=6,w.WG.put("/blog/blog/edit?_id=".concat(n._id),R);case 6:i=e.sent,console.log(i.data),a((0,y.wu)()),alert("Blog posted."),i.data&&window.location.reload(),e.next=20;break;case 13:return e.next=15,w.WG.post("/blog/post-blog",R);case 15:s=e.sent,console.log(s.data),a((0,y.wu)()),alert("Blog posted."),s.data&&window.location.reload();case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),alert(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.data),a((0,y.Uw)());case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("form",{className:"add",onSubmit:L,children:[(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)("input",{type:"text",placeholder:"Title",onChange:function(e){return f(e.target.value)},value:m,required:!0}),(0,j.jsxs)("div",{className:"",children:[N&&(0,j.jsx)("img",{src:(null===n||void 0===n?void 0:n.photo)||URL.createObjectURL(N),alt:""}),(0,j.jsx)(k,{setParagraphs:G,paragraphs:E})]})]}),(0,j.jsxs)("div",{className:"menu",children:[(0,j.jsxs)("div",{className:"item",children:[(0,j.jsx)("h1",{children:"Publish"}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:"Status: "})," Draft"]}),(0,j.jsxs)("span",{children:[(0,j.jsx)("b",{children:"Visibility: "})," Public"]}),(0,j.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"photo",onChange:function(e){return Z(e.target.files[0])}}),(0,j.jsx)("label",{className:"file",htmlFor:"file",children:"Upload Image"}),(0,j.jsxs)("div",{className:"buttons",children:[(0,j.jsx)("button",{children:"Save as a draft"}),(0,j.jsx)("button",{disabled:!m,children:t?"Please wait...":"Publish"})]})]}),(0,j.jsxs)("div",{className:"item",children:[(0,j.jsx)("h1",{children:"Category"}),(0,j.jsxs)("div",{className:"cat",children:[(0,j.jsx)("input",{type:"radio",checked:"tips&tricks"===F,name:"cat",value:"tips&tricks",id:"tips&tricks",onChange:function(e){return _(e.target.value)}}),(0,j.jsx)("label",{htmlFor:"tips&tricks",children:"Tips & Tricks"})]}),(0,j.jsxs)("div",{className:"cat",children:[(0,j.jsx)("input",{type:"radio",checked:"news"===F,name:"cat",value:"news",id:"news",onChange:function(e){return _(e.target.value)}}),(0,j.jsx)("label",{htmlFor:"news",children:"News"})]}),(0,j.jsxs)("div",{className:"cat",children:[(0,j.jsx)("input",{type:"radio",checked:"models"===F,name:"cat",value:"models",id:"models",onChange:function(e){return _(e.target.value)}}),(0,j.jsx)("label",{htmlFor:"models",children:"Models"})]}),(0,j.jsxs)("div",{className:"cat",children:[(0,j.jsx)("input",{type:"radio",checked:"lifestyle"===F,name:"cat",value:"lifestyle",id:"lifestyle",onChange:function(e){return _(e.target.value)}}),(0,j.jsx)("label",{htmlFor:"lifestyle",children:"Lifestyle"})]}),(0,j.jsxs)("div",{className:"cat",children:[(0,j.jsx)("input",{type:"radio",checked:"magazine"===F,name:"cat",value:"magazine",id:"magazine",onChange:function(e){return _(e.target.value)}}),(0,j.jsx)("label",{htmlFor:"magazine",children:"Magazine"})]})]})]})]})},Z=function(e){var t=e.isWrite,n=e.setIsWrite,o=(0,g.I0)(),c=(0,s.useState)([]),d=(0,i.Z)(c,2),u=d[0],h=d[1],p=(0,l.TH)().search;(0,s.useEffect)((function(){(0,x.PD)(o,"/blog/blogs",h)}),[p]);var m=(0,a.Z)(u).reverse(),f=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent};return(0,j.jsxs)("div",{className:"home",children:[(0,j.jsx)("button",{className:"newBlog",onClick:function(){return n(!t)},children:t?"Close":"New Blog"}),t?(0,j.jsx)(N,{}):(0,j.jsx)("div",{className:"posts",children:m.map((function(e,t){var n;return(0,j.jsxs)("div",{className:"post",children:[e.photo&&(0,j.jsx)("div",{className:"img",children:(0,j.jsx)("img",{src:e.photo,alt:""})}),(0,j.jsxs)("div",{className:"content",children:[(0,j.jsx)(r.rU,{className:"link",to:"/adminpage/post/".concat(e._id),children:(0,j.jsx)("h1",{children:e.title})}),(null===e||void 0===e?void 0:e.text)&&(0,j.jsx)("p",{children:f(null===e||void 0===e?void 0:e.text)}),null===e||void 0===e||null===(n=e.paragraphs)||void 0===n?void 0:n.slice(0,1).map((function(e,t){return(0,j.jsx)("p",{children:f(null===e||void 0===e?void 0:e.text)},t)})),(0,j.jsx)(r.rU,{className:"link",to:"/adminpage/post/".concat(e._id),children:(0,j.jsx)("button",{children:"Read More"})})]})]},t)}))})]})}}}]);
//# sourceMappingURL=126.bff16db9.chunk.js.map