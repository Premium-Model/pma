{"version":3,"file":"static/js/597.00a6e926.chunk.js","mappings":"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","sources":["UI/Admin-UI/Blog/BundledEditor.jsx","UI/Admin-UI/Blog/Write.jsx","UI/Admin-UI/Blog/Blogs.jsx"],"sourcesContent":["import { Editor } from \"@tinymce/tinymce-react\";\r\nimport { getDownloadURL, ref, uploadBytesResumable } from \"@firebase/storage\";\r\nimport { storage } from \"../../../firebase/index\";\r\n\r\n// TinyMCE so the global var exists\r\n// eslint-disable-next-line no-unused-vars\r\nimport tinymce from \"tinymce/tinymce\";\r\n// DOM model\r\nimport \"tinymce/models/dom/model\";\r\n// Theme\r\nimport \"tinymce/themes/silver\";\r\n// Toolbar icons\r\nimport \"tinymce/icons/default\";\r\n// Editor styles\r\nimport \"tinymce/skins/ui/oxide/skin.min.css\";\r\n\r\n// importing the plugin js.\r\n// if you use a plugin that is not listed here the editor will fail to load\r\nimport \"tinymce/plugins/advlist\";\r\nimport \"tinymce/plugins/anchor\";\r\nimport \"tinymce/plugins/autolink\";\r\nimport \"tinymce/plugins/autoresize\";\r\nimport \"tinymce/plugins/autosave\";\r\nimport \"tinymce/plugins/charmap\";\r\nimport \"tinymce/plugins/code\";\r\nimport \"tinymce/plugins/codesample\";\r\nimport \"tinymce/plugins/directionality\";\r\nimport \"tinymce/plugins/emoticons\";\r\nimport \"tinymce/plugins/fullscreen\";\r\nimport \"tinymce/plugins/help\";\r\nimport \"tinymce/plugins/image\";\r\nimport \"tinymce/plugins/importcss\";\r\nimport \"tinymce/plugins/insertdatetime\";\r\nimport \"tinymce/plugins/link\";\r\nimport \"tinymce/plugins/lists\";\r\nimport \"tinymce/plugins/media\";\r\nimport \"tinymce/plugins/nonbreaking\";\r\nimport \"tinymce/plugins/pagebreak\";\r\nimport \"tinymce/plugins/preview\";\r\nimport \"tinymce/plugins/quickbars\";\r\nimport \"tinymce/plugins/save\";\r\nimport \"tinymce/plugins/searchreplace\";\r\nimport \"tinymce/plugins/table\";\r\nimport \"tinymce/plugins/template\";\r\nimport \"tinymce/plugins/visualblocks\";\r\nimport \"tinymce/plugins/visualchars\";\r\nimport \"tinymce/plugins/wordcount\";\r\n\r\n// importing plugin resources\r\nimport \"tinymce/plugins/emoticons/js/emojis\";\r\n\r\n// Content styles, including inline UI like fake cursors\r\n/* eslint import/no-webpack-loader-syntax: off */\r\nimport contentCss from \"!!raw-loader!tinymce/skins/content/default/content.min.css\";\r\nimport contentUiCss from \"!!raw-loader!tinymce/skins/ui/oxide/content.min.css\";\r\nimport { useRef, useState } from \"react\";\r\n\r\nexport default function BundledEditor({ setParagraphs, paragraphs }) {\r\n  // note that skin and content_css is disabled to avoid the normal\r\n  // loading process and is instead loaded as a string via content_style\r\n  const editorRef = useRef(null);\r\n\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  const handleEditorChange = (content, editor) => {\r\n    // Split the content into paragraphs at each line break\r\n    const paragraphsArray = content.split(\"\\n\");\r\n\r\n    // Create an array of paragraph objects with text and image properties\r\n    const formattedParagraphs = paragraphsArray.map((paragraph) => {\r\n      if (paragraph.trim().startsWith(\"<p><img\")) {\r\n        return {\r\n          text: \"\",\r\n          image: paragraph.match(/src=\"([^\"]+)\"/)?.[1] || \"\",\r\n        };\r\n      } else {\r\n        return {\r\n          text: paragraph.trim(),\r\n          image: \"\",\r\n        };\r\n      }\r\n    });\r\n\r\n    // Update the paragraphs state with the filtered paragraphs\r\n    setParagraphs(formattedParagraphs);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Editor\r\n        onInit={(evt, editor) => (editorRef.current = editor)}\r\n        init={{\r\n          height: 500,\r\n          menubar: false,\r\n          selector: \"textarea\",\r\n          plugins: [\r\n            \"advlist\",\r\n            \"anchor\",\r\n            \"autolink\",\r\n            \"help\",\r\n            \"image\",\r\n            \"link\",\r\n            \"lists\",\r\n            \"searchreplace\",\r\n            \"table\",\r\n            \"wordcount\",\r\n            \"media\",\r\n          ],\r\n          toolbar:\r\n            \"undo redo | blocks | \" +\r\n            \"bold italic forecolor | alignleft aligncenter \" +\r\n            \"alignright alignjustify | bullist numlist outdent indent | \" +\r\n            \"removeformat | \" +\r\n            \"image | link\",\r\n          content_style:\r\n            \"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }\",\r\n          file_picker_types: \"image\",\r\n          file_picker_callback: function (callback, value, meta) {\r\n            var input = document.createElement(\"input\");\r\n            input.setAttribute(\"type\", \"file\");\r\n            input.setAttribute(\"accept\", \"image/*\");\r\n\r\n            input.onchange = function () {\r\n              var file = this.files[0];\r\n              const fileName = new Date().getTime() + file.name;\r\n              const storageRef = ref(storage, `/blogs/${fileName}`);\r\n              const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n              uploadTask.on(\r\n                \"state_changed\",\r\n                (snapshot) => {\r\n                  const progress =\r\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                  setProgress(Math.round(progress));\r\n                  switch (snapshot.state) {\r\n                    case \"paused\":\r\n                      console.log(\"Upload is paused\");\r\n                      break;\r\n                    case \"running\":\r\n                      console.log(\"Upload is running\");\r\n                      break;\r\n                    default:\r\n                      break;\r\n                  }\r\n                },\r\n                (error) => {},\r\n                () => {\r\n                  getDownloadURL(uploadTask.snapshot.ref).then(\r\n                    (downloadURL) => {\r\n                      callback(downloadURL, { image: downloadURL });\r\n                    }\r\n                  );\r\n                }\r\n              );\r\n            };\r\n\r\n            input.click();\r\n          },\r\n        }}\r\n        onEditorChange={handleEditorChange}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { getDownloadURL, ref, uploadBytesResumable } from \"@firebase/storage\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { storage } from \"../../../firebase\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { makeEdit, makePost } from \"../../../redux/apiCalls\";\r\nimport BundledEditor from \"./BundledEditor\";\r\nimport {\r\n  processFailure,\r\n  processStart,\r\n  processSuccess,\r\n} from \"../../../redux/processRedux\";\r\nimport { userRequest } from \"../../../redux/requestMethod\";\r\n\r\nconst Write = () => {\r\n  const { isFetching } = useSelector((state) => state.process);\r\n  const state = useLocation().state;\r\n  const dispatch = useDispatch();\r\n\r\n  const [title, setTitle] = useState(state?.title || \"\");\r\n  const [photo, setPhoto] = useState(state?.photo || undefined);\r\n  const [cat, setCat] = useState(state?.cat || \"\");\r\n  const [progress, setProgress] = useState(0);\r\n  const [inputs, setInputs] = useState({});\r\n  const [message, setMessage] = useState(\"\");\r\n  const [paragraphs, setParagraphs] = useState([]);\r\n\r\n  const uploadFile = (file, urlType) => {\r\n    const fileName = new Date().getTime() + file.name;\r\n    const storageRef = ref(storage, `/models/${fileName}`);\r\n    const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        const progress =\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n        urlType === \"photo\" && setProgress(Math.round(progress));\r\n\r\n        switch (snapshot.state) {\r\n          case \"paused\":\r\n            console.log(\"Upload is paused\");\r\n            break;\r\n          case \"running\":\r\n            console.log(\"Upload is running\");\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      },\r\n      (error) => {},\r\n      () => {\r\n        getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n          setInputs((prev) => {\r\n            return { ...prev, [urlType]: downloadURL };\r\n          });\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    photo && uploadFile(photo, \"photo\");\r\n  }, [photo]);\r\n\r\n  const data = {\r\n    title,\r\n    photo: state?.photo || inputs.photo,\r\n    cat,\r\n    paragraphs,\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault()\r\n    dispatch(processStart());\r\n    try {\r\n      if (state) {\r\n        const res = await userRequest.put(\r\n          `/blog/blog/edit?_id=${state._id}`,\r\n          data\r\n        );\r\n        console.log(res.data);\r\n        dispatch(processSuccess());\r\n        alert(\"Blog posted.\");\r\n        res.data && window.location.reload();\r\n      } else {\r\n        const res = await userRequest.post(\"/blog/post-blog\", data);\r\n        console.log(res.data);\r\n        dispatch(processSuccess());\r\n        alert(\"Blog posted.\");\r\n        res.data && window.location.reload();\r\n      }\r\n    } catch (err) {\r\n      alert(err?.response?.data);\r\n      dispatch(processFailure());\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"add\" onSubmit={handleClick}>\r\n      {/* <form> */}\r\n      <div className=\"content\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Title\"\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          value={title}\r\n          required\r\n        />\r\n        <div className=\"\">\r\n          {photo && (\r\n            <img src={state?.photo || URL.createObjectURL(photo)} alt=\"\" />\r\n          )}\r\n          <BundledEditor\r\n            setParagraphs={setParagraphs}\r\n            paragraphs={paragraphs}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"menu\">\r\n        <div className=\"item\">\r\n          <h1>Publish</h1>\r\n          <span>\r\n            <b>Status: </b> Draft\r\n          </span>\r\n          <span>\r\n            <b>Visibility: </b> Public\r\n          </span>\r\n          <input\r\n            style={{ display: \"none\" }}\r\n            type=\"file\"\r\n            id=\"file\"\r\n            name=\"photo\"\r\n            onChange={(e) => setPhoto(e.target.files[0])}\r\n          />\r\n          <label className=\"file\" htmlFor=\"file\">\r\n            Upload Image\r\n          </label>\r\n          <div className=\"buttons\">\r\n            <button>Save as a draft</button>\r\n            <button disabled={!title}>\r\n              {isFetching ? \"Please wait...\" : \"Publish\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"item\">\r\n          <h1>Category</h1>\r\n          <div className=\"cat\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={cat === \"tips&tricks\"}\r\n              name=\"cat\"\r\n              value=\"tips&tricks\"\r\n              id=\"tips&tricks\"\r\n              onChange={(e) => setCat(e.target.value)}\r\n            />\r\n            <label htmlFor=\"tips&tricks\">Tips & Tricks</label>\r\n          </div>\r\n          <div className=\"cat\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={cat === \"news\"}\r\n              name=\"cat\"\r\n              value=\"news\"\r\n              id=\"news\"\r\n              onChange={(e) => setCat(e.target.value)}\r\n            />\r\n            <label htmlFor=\"news\">News</label>\r\n          </div>\r\n          <div className=\"cat\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={cat === \"models\"}\r\n              name=\"cat\"\r\n              value=\"models\"\r\n              id=\"models\"\r\n              onChange={(e) => setCat(e.target.value)}\r\n            />\r\n            <label htmlFor=\"models\">Models</label>\r\n          </div>\r\n          <div className=\"cat\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={cat === \"lifestyle\"}\r\n              name=\"cat\"\r\n              value=\"lifestyle\"\r\n              id=\"lifestyle\"\r\n              onChange={(e) => setCat(e.target.value)}\r\n            />\r\n            <label htmlFor=\"lifestyle\">Lifestyle</label>\r\n          </div>\r\n          <div className=\"cat\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={cat === \"magazine\"}\r\n              name=\"cat\"\r\n              value=\"magazine\"\r\n              id=\"magazine\"\r\n              onChange={(e) => setCat(e.target.value)}\r\n            />\r\n            <label htmlFor=\"magazine\">Magazine</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* </form> */}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Write;\r\n","import { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./styles.scss\";\r\nimport Write from \"./Write\";\r\nimport { makeGet } from \"../../../redux/apiCalls\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst Blogs = ({ isWrite, setIsWrite }) => {\r\n  const dispatch = useDispatch();\r\n  const [posts, setPosts] = useState([]);\r\n  // const [isWrite, setIsWrite] = useState(false);\r\n\r\n  const cat = useLocation().search;\r\n  // console.log(cat);\r\n\r\n  useEffect(() => {\r\n    const fetchData = () => {\r\n      makeGet(dispatch, \"/blog/blogs\", setPosts);\r\n    };\r\n    fetchData();\r\n  }, [cat]);\r\n\r\n  const reversed = [...posts].reverse();\r\n\r\n  const getText = (html) => {\r\n    const doc = new DOMParser().parseFromString(html, \"text/html\");\r\n    return doc.body.textContent;\r\n  };\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <button className=\"newBlog\" onClick={() => setIsWrite(!isWrite)}>\r\n        {isWrite ? \"Close\" : \"New Blog\"}\r\n      </button>\r\n      {isWrite ? (\r\n        <Write />\r\n      ) : (\r\n        <div className=\"posts\">\r\n          {reversed.map((post, index) => (\r\n            <div className=\"post\" key={index}>\r\n              {post.photo && (\r\n                <div className=\"img\">\r\n                  <img src={post.photo} alt=\"\" />\r\n                </div>\r\n              )}\r\n              <div className=\"content\">\r\n                <Link className=\"link\" to={`/adminpage/post/${post._id}`}>\r\n                  <h1>{post.title}</h1>\r\n                </Link>\r\n                {post?.text && <p>{getText(post?.text)}</p>}\r\n                {post?.paragraphs?.slice(0, 1).map((item, index) => (\r\n                  <p key={index}>{getText(item?.text)}</p>\r\n                ))}\r\n                <Link className=\"link\" to={`/adminpage/post/${post._id}`}>\r\n                  <button>Read More</button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Blogs;\r\n"],"names":["BundledEditor","_ref","setParagraphs","paragraphs","editorRef","useRef","progress","setProgress","useState","_jsx","children","Editor","onInit","evt","editor","current","init","height","menubar","selector","plugins","toolbar","content_style","file_picker_types","file_picker_callback","callback","value","meta","input","document","createElement","setAttribute","onchange","file","this","files","fileName","Date","getTime","name","storageRef","ref","storage","concat","uploadTask","uploadBytesResumable","on","snapshot","bytesTransferred","totalBytes","Math","round","state","console","log","error","getDownloadURL","then","downloadURL","image","click","onEditorChange","handleEditorChange","content","formattedParagraphs","split","map","paragraph","_paragraph$match","trim","startsWith","text","match","Write","isFetching","useSelector","process","useLocation","dispatch","useDispatch","title","setTitle","photo","setPhoto","undefined","cat","setCat","inputs","setInputs","message","setMessage","useEffect","uploadFile","urlType","prev","data","_jsxs","className","onSubmit","async","e","preventDefault","processStart","res","userRequest","put","_id","processSuccess","alert","window","location","reload","post","err","_err$response","response","processFailure","type","placeholder","onChange","target","required","src","URL","createObjectURL","alt","style","display","id","htmlFor","disabled","checked","isWrite","setIsWrite","posts","setPosts","search","makeGet","reversed","reverse","getText","html","DOMParser","parseFromString","body","textContent","onClick","index","_post$paragraphs","Link","to","slice","item"],"sourceRoot":""}