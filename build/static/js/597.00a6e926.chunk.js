"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[597],{7597:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(2791),i=a(7689),l=a(1087),n=(a(8228),a(4290)),o=a(6831),c=a(9434),r=a(4338),d=a(9687),h=(a(8838),a(6890),a(3342),a(6202),a(1207),a(2687),a(1786),a(8291),a(395),a(4601),a(6733),a(1108),a(6504),a(8924),a(769),a(288),a(2655),a(1182),a(6168),a(5672),a(594),a(7711),a(4954),a(7935),a(1639),a(3660),a(7332),a(317),a(5637),a(1228),a(5278),a(560),a(1559),a(499),a(8743),a(58),a(782),a(184));function u(e){let{setParagraphs:t,paragraphs:a}=e;const i=(0,s.useRef)(null),[l,c]=(0,s.useState)(0);return(0,h.jsx)("div",{children:(0,h.jsx)(d.M,{onInit:(e,t)=>i.current=t,init:{height:500,menubar:!1,selector:"textarea",plugins:["advlist","anchor","autolink","help","image","link","lists","searchreplace","table","wordcount","media"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | image | link",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",file_picker_types:"image",file_picker_callback:function(e,t,a){var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.onchange=function(){var t=this.files[0];const a=(new Date).getTime()+t.name,s=(0,n.iH)(o.t,"/blogs/".concat(a)),i=(0,n.B0)(s,t);i.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;switch(c(Math.round(t)),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{}),(()=>{(0,n.Jt)(i.snapshot.ref).then((t=>{e(t,{image:t})}))}))},s.click()}},onEditorChange:(e,a)=>{const s=e.split("\n").map((e=>{var t;return e.trim().startsWith("<p><img")?{text:"",image:(null===(t=e.match(/src="([^"]+)"/))||void 0===t?void 0:t[1])||""}:{text:e.trim(),image:""}}));t(s)}})})}var p=a(3185),m=a(6372);const g=()=>{const{isFetching:e}=(0,c.v9)((e=>e.process)),t=(0,i.TH)().state,a=(0,c.I0)(),[l,r]=(0,s.useState)((null===t||void 0===t?void 0:t.title)||""),[d,g]=(0,s.useState)((null===t||void 0===t?void 0:t.photo)||void 0),[v,x]=(0,s.useState)((null===t||void 0===t?void 0:t.cat)||""),[j,b]=(0,s.useState)(0),[f,y]=(0,s.useState)({}),[k,w]=(0,s.useState)(""),[N,C]=(0,s.useState)([]);(0,s.useEffect)((()=>{d&&((e,t)=>{const a=(new Date).getTime()+e.name,s=(0,n.iH)(o.t,"/models/".concat(a)),i=(0,n.B0)(s,e);i.on("state_changed",(e=>{const a=e.bytesTransferred/e.totalBytes*100;switch("photo"===t&&b(Math.round(a)),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(e=>{}),(()=>{(0,n.Jt)(i.snapshot.ref).then((e=>{y((a=>({...a,[t]:e})))}))}))})(d,"photo")}),[d]);const S={title:l,photo:(null===t||void 0===t?void 0:t.photo)||f.photo,cat:v,paragraphs:N};return(0,h.jsxs)("form",{className:"add",onSubmit:async e=>{e.preventDefault(),a((0,p.GA)());try{if(t){const e=await m.WG.put("/blog/blog/edit?_id=".concat(t._id),S);console.log(e.data),a((0,p.wu)()),alert("Blog posted."),e.data&&window.location.reload()}else{const e=await m.WG.post("/blog/post-blog",S);console.log(e.data),a((0,p.wu)()),alert("Blog posted."),e.data&&window.location.reload()}}catch(i){var s;alert(null===i||void 0===i||null===(s=i.response)||void 0===s?void 0:s.data),a((0,p.Uw)())}},children:[(0,h.jsxs)("div",{className:"content",children:[(0,h.jsx)("input",{type:"text",placeholder:"Title",onChange:e=>r(e.target.value),value:l,required:!0}),(0,h.jsxs)("div",{className:"",children:[d&&(0,h.jsx)("img",{src:(null===t||void 0===t?void 0:t.photo)||URL.createObjectURL(d),alt:""}),(0,h.jsx)(u,{setParagraphs:C,paragraphs:N})]})]}),(0,h.jsxs)("div",{className:"menu",children:[(0,h.jsxs)("div",{className:"item",children:[(0,h.jsx)("h1",{children:"Publish"}),(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Status: "})," Draft"]}),(0,h.jsxs)("span",{children:[(0,h.jsx)("b",{children:"Visibility: "})," Public"]}),(0,h.jsx)("input",{style:{display:"none"},type:"file",id:"file",name:"photo",onChange:e=>g(e.target.files[0])}),(0,h.jsx)("label",{className:"file",htmlFor:"file",children:"Upload Image"}),(0,h.jsxs)("div",{className:"buttons",children:[(0,h.jsx)("button",{children:"Save as a draft"}),(0,h.jsx)("button",{disabled:!l,children:e?"Please wait...":"Publish"})]})]}),(0,h.jsxs)("div",{className:"item",children:[(0,h.jsx)("h1",{children:"Category"}),(0,h.jsxs)("div",{className:"cat",children:[(0,h.jsx)("input",{type:"radio",checked:"tips&tricks"===v,name:"cat",value:"tips&tricks",id:"tips&tricks",onChange:e=>x(e.target.value)}),(0,h.jsx)("label",{htmlFor:"tips&tricks",children:"Tips & Tricks"})]}),(0,h.jsxs)("div",{className:"cat",children:[(0,h.jsx)("input",{type:"radio",checked:"news"===v,name:"cat",value:"news",id:"news",onChange:e=>x(e.target.value)}),(0,h.jsx)("label",{htmlFor:"news",children:"News"})]}),(0,h.jsxs)("div",{className:"cat",children:[(0,h.jsx)("input",{type:"radio",checked:"models"===v,name:"cat",value:"models",id:"models",onChange:e=>x(e.target.value)}),(0,h.jsx)("label",{htmlFor:"models",children:"Models"})]}),(0,h.jsxs)("div",{className:"cat",children:[(0,h.jsx)("input",{type:"radio",checked:"lifestyle"===v,name:"cat",value:"lifestyle",id:"lifestyle",onChange:e=>x(e.target.value)}),(0,h.jsx)("label",{htmlFor:"lifestyle",children:"Lifestyle"})]}),(0,h.jsxs)("div",{className:"cat",children:[(0,h.jsx)("input",{type:"radio",checked:"magazine"===v,name:"cat",value:"magazine",id:"magazine",onChange:e=>x(e.target.value)}),(0,h.jsx)("label",{htmlFor:"magazine",children:"Magazine"})]})]})]})]})},v=e=>{let{isWrite:t,setIsWrite:a}=e;const n=(0,c.I0)(),[o,d]=(0,s.useState)([]),u=(0,i.TH)().search;(0,s.useEffect)((()=>{(0,r.PD)(n,"/blog/blogs",d)}),[u]);const p=[...o].reverse(),m=e=>(new DOMParser).parseFromString(e,"text/html").body.textContent;return(0,h.jsxs)("div",{className:"home",children:[(0,h.jsx)("button",{className:"newBlog",onClick:()=>a(!t),children:t?"Close":"New Blog"}),t?(0,h.jsx)(g,{}):(0,h.jsx)("div",{className:"posts",children:p.map(((e,t)=>{var a;return(0,h.jsxs)("div",{className:"post",children:[e.photo&&(0,h.jsx)("div",{className:"img",children:(0,h.jsx)("img",{src:e.photo,alt:""})}),(0,h.jsxs)("div",{className:"content",children:[(0,h.jsx)(l.rU,{className:"link",to:"/adminpage/post/".concat(e._id),children:(0,h.jsx)("h1",{children:e.title})}),(null===e||void 0===e?void 0:e.text)&&(0,h.jsx)("p",{children:m(null===e||void 0===e?void 0:e.text)}),null===e||void 0===e||null===(a=e.paragraphs)||void 0===a?void 0:a.slice(0,1).map(((e,t)=>(0,h.jsx)("p",{children:m(null===e||void 0===e?void 0:e.text)},t))),(0,h.jsx)(l.rU,{className:"link",to:"/adminpage/post/".concat(e._id),children:(0,h.jsx)("button",{children:"Read More"})})]})]},t)}))})]})}}}]);
//# sourceMappingURL=597.00a6e926.chunk.js.map